@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
	Layout = null;
}

<html>
<head>
	<title>Hotels</title>
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script>
		$(document).ready(function() {
			$.get("/Main/GetHotels", (data) => {
				$("#hotels").html(data);

				$("#hotels").on("click", "button[data-id]", function(){
					const hotelId = $(this).data("id");
					$.post("/Main/ReserveHotel", {hotelId: hotelId})
					.done(function()
						{
							alert("Reservation made");
							window.location.reload();
						});
				});

			})

			$("#cancelButton").click(function() {
				$.get("/Main/CancelAllReservations")
					.done(function() {
						alert("Reservations canceled");
						window.location.reload();
					});
			});

			$("#flightsButton").click(function() {
				window.location.href = "/Main/GetFlightsPage";
			});

			$("#hotelsButton").click(function() {
				window.location.href = "/Main/GetHotelsPage";
			});
		});
	</script>
</head>
<body>
	<button id="flightsButton">Flights</button>
	<button id="hotelsButton">Hotels</button>
	<button id="cancelButton">Cancel All Reservations</button>
	<h2>Hotels</h2>
	<div id="hotels"></div>
</body>
</html>
